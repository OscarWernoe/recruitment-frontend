(function(e){function t(t){for(var r,o,i=t[0],l=t[1],u=t[2],p=0,m=[];p<i.length;p++)o=i[p],n[o]&&m.push(n[o][0]),n[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);c&&c(t);while(m.length)m.shift()();return s.push.apply(s,u||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],r=!0,i=1;i<a.length;i++){var l=a[i];0!==n[l]&&(r=!1)}r&&(s.splice(t--,1),e=o(o.s=a[0]))}return e}var r={},n={app:0},s=[];function o(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=r,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(a,r,function(t){return e[t]}.bind(null,r));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var c=l;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var r=a("64a9"),n=a.n(r);n.a},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("f751"),a("097d");var r=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("header-component"),a("main",[a("router-view")],1)],1)},s=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-navbar",{attrs:{toggleable:"md",type:"dark",variant:"info",fixed:"top"}},[a("b-navbar-toggle",{attrs:{target:"nav_collapse"}}),a("b-navbar-brand",{attrs:{to:"/"}},[e._v("Recruitment")]),a("b-collapse",{attrs:{"is-nav":"",id:"nav_collapse"}},[a("b-navbar-nav",[e.isLoggedIn&&e.isApplicant?a("b-nav-item",{attrs:{to:"apply"}},[e._v("Apply")]):e._e(),e.isLoggedIn?e._e():a("b-nav-item",{attrs:{to:"register"}},[e._v("Register")]),e.isLoggedIn?e._e():a("b-nav-item",{attrs:{to:"login"}},[e._v("Sign in")]),e.isLoggedIn?a("b-nav-item",[a("a",{on:{click:e.logout}},[e._v("Sign out")])]):e._e()],1)],1)],1)},i=[],l={computed:{isLoggedIn:function(){return this.$store.getters.isLoggedIn},isApplicant:function(){return this.$store.getters.isApplicant}},methods:{logout:function(){var e=this;this.$store.dispatch("logout").then(function(){e.$router.push("/login")})}}},u=l,c=a("2877"),p=Object(c["a"])(u,o,i,!1,null,null,null),m=p.exports,d={name:"app",components:{HeaderComponent:m}},f=d,b=(a("034f"),Object(c["a"])(f,n,s,!1,null,null,null)),v=b.exports,h=a("bc3a"),g=a.n(h),w=a("9f7b"),_=a.n(w),x=a("7bb1"),y=(a("6762"),a("8c4f")),j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div")},$=[],k={},S=k,O=Object(c["a"])(S,j,$,!1,null,null,null),T=O.exports,E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-container",[a("b-form",{on:{submit:function(t){return t.preventDefault(),e.submit(t)},reset:e.reset}},[a("b-row",{staticClass:"p-1"},[a("b-col",{attrs:{md:"2"}},[a("label",{attrs:{for:"name"}},[e._v("First Name:")])]),a("b-col",{attrs:{md:"10"}},[a("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:2|max:50",expression:"'required|min:2|max:50'"}],attrs:{id:"name",type:"text",name:"name",placeholder:"Enter your first name"},model:{value:e.applicant.name,callback:function(t){e.$set(e.applicant,"name",t)},expression:"applicant.name"}}),a("span",[e._v(e._s(e.errors.first("name")))])],1)],1),a("b-row",{staticClass:"p-1"},[a("b-col",{attrs:{md:"2"}},[a("label",{attrs:{for:"surname"}},[e._v("Last Name:")])]),a("b-col",{attrs:{md:"10"}},[a("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:2|max:50",expression:"'required|min:2|max:50'"}],attrs:{id:"surname",type:"text",name:"surname",placeholder:"Enter your last name"},model:{value:e.applicant.surname,callback:function(t){e.$set(e.applicant,"surname",t)},expression:"applicant.surname"}}),a("span",[e._v(e._s(e.errors.first("surname")))])],1)],1),a("b-row",{staticClass:"p-1"},[a("b-col",{attrs:{md:"2"}},[a("label",{attrs:{for:"email"}},[e._v("Email:")])]),a("b-col",{attrs:{md:"10"}},[a("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email|max:50",expression:"'required|email|max:50'"}],attrs:{id:"email",type:"email",name:"email",placeholder:"Enter your email"},model:{value:e.applicant.email,callback:function(t){e.$set(e.applicant,"email",t)},expression:"applicant.email"}}),a("span",[e._v(e._s(e.errors.first("email")))])],1)],1),a("b-row",{staticClass:"p-1"},[a("b-col",{attrs:{md:"2"}},[a("label",{attrs:{for:"ssn"}},[e._v("SSN:")])]),a("b-col",{attrs:{md:"10"}},[a("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|numeric|min:10|max:10",expression:"'required|numeric|min:10|max:10'"}],attrs:{id:"ssn",type:"text",name:"ssn",placeholder:"Enter your SSN"},model:{value:e.applicant.ssn,callback:function(t){e.$set(e.applicant,"ssn",t)},expression:"applicant.ssn"}}),a("span",[e._v(e._s(e.errors.first("ssn")))])],1)],1),a("b-row",{staticClass:"p-1"},[a("b-col",{attrs:{md:"2"}},[a("label",{attrs:{for:"username"}},[e._v("Username:")])]),a("b-col",{attrs:{md:"10"}},[a("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:50",expression:"'required|max:50'"}],attrs:{id:"username",type:"text",name:"username",placeholder:"Enter a username"},model:{value:e.applicant.username,callback:function(t){e.$set(e.applicant,"username",t)},expression:"applicant.username"}}),a("span",[e._v(e._s(e.errors.first("username")))])],1)],1),a("b-row",{staticClass:"p-1"},[a("b-col",{attrs:{md:"2"}},[a("label",{attrs:{for:"password"}},[e._v("Password:")])]),a("b-col",{attrs:{md:"10"}},[a("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:8|max:100",expression:"'required|min:8|max:100'"}],attrs:{id:"password",type:"password",name:"password",placeholder:"Enter a password"},model:{value:e.applicant.password,callback:function(t){e.$set(e.applicant,"password",t)},expression:"applicant.password"}}),a("span",[e._v(e._s(e.errors.first("password")))])],1)],1),a("b-row",{staticClass:"p-1"},[a("b-col",{attrs:{md:"12"}},[a("b-button",{staticClass:"m-1",attrs:{type:"submit",variant:"primary"}},[e._v("Submit")]),a("b-button",{staticClass:"m-1",attrs:{type:"reset",variant:"danger"}},[e._v("Reset")])],1)],1)],1)],1),a("div",[a("p",[e._v(e._s(e.message))])])],1)},q=[],J={data:function(){return{applicant:{name:"",surname:"",email:"",ssn:"",username:"",password:""},message:""}},methods:{submit:function(){var e=this;this.$validator.validateAll().then(function(t){t&&g()({url:"https://recruitment-backend.herokuapp.com/users",data:e.applicant,method:"POST"}).then(function(t){t.data.success?e.$router.push("/login"):e.message=t.data.message}).catch(function(e){return console.log(e)})}).catch(function(){return!1})},reset:function(){this.applicant.name="",this.applicant.surname="",this.applicant.email="",this.applicant.ssn="",this.applicant.username="",this.applicant.password=""}}},I=J,N=Object(c["a"])(I,E,q,!1,null,null,null),R=N.exports,C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-container",[a("b-form",{on:{submit:function(t){return t.preventDefault(),e.submit(t)},reset:e.reset}},[a("b-row",[a("b-col",{attrs:{md:"12"}},[a("b-form-group",{attrs:{label:"Username:","label-for":"username"}},[a("b-form-input",{attrs:{id:"username",type:"text",required:"",placeholder:"Enter a username"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1)],1)],1),a("b-row",[a("b-col",{attrs:{md:"12"}},[a("b-form-group",{attrs:{label:"Password:","label-for":"password"}},[a("b-form-input",{attrs:{id:"password",type:"password",required:"",placeholder:"Enter a password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1)],1),a("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Submit")]),a("b-button",{attrs:{type:"reset",variant:"danger"}},[e._v("Reset")])],1)],1),a("div",[a("p",[e._v("JWT: "+e._s(e.jwt))]),a("p",[e._v("Username: "+e._s(e.jwtSubject))]),a("p",[e._v("Role: "+e._s(e.jwtRole))])])],1)},W=[],L=a("cebc"),P=a("2f62"),A={data:function(){return{form:{username:"",password:""}}},computed:Object(L["a"])({},Object(P["c"])(["jwt","jwtSubject","jwtRole"])),methods:Object(L["a"])({},Object(P["b"])(["login"]),{submit:function(){this.$store.dispatch("login",this.form).catch(function(e){return console.log(e)})},reset:function(){this.form.username="",this.form.password=""}})},D=A,M=Object(c["a"])(D,C,W,!1,null,null,null),U=M.exports,z=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},F=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("p",[e._v("This is the application page.")])])}],H={},B=H,G=Object(c["a"])(B,z,F,!1,null,null,null),K=G.exports,Q=(a("673e"),a("28a5"),a("96cf"),a("3b8d"));r["a"].use(P["a"]);var V=new P["a"].Store({state:{currentJWT:localStorage.getItem("accessToken")},mutations:{setJWT:function(e,t){e.currentJWT=t}},actions:{login:function(){var e=Object(Q["a"])(regeneratorRuntime.mark(function e(t,a){var r,n,s,o,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,n=t.state,s=a.username,o=a.password,e.next=4,g.a.post("https://recruitment-backend.herokuapp.com/session",{username:s,password:o});case 4:return i=e.sent,e.t0=r,e.next=8,i.data.accessToken;case 8:e.t1=e.sent,(0,e.t0)("setJWT",e.t1),localStorage.setItem("accessToken",n.currentJWT);case 11:case"end":return e.stop()}},e)}));function t(t,a){return e.apply(this,arguments)}return t}(),logout:function(e){var t=e.commit;t("setJWT",""),localStorage.removeItem("accessToken")}},getters:{jwt:function(e){return e.currentJWT},jwtData:function(e,t){return e.currentJWT?JSON.parse(atob(t.jwt.split(".")[1])):null},jwtSubject:function(e,t){return t.jwtData?t.jwtData.sub:null},jwtRole:function(e,t){return t.jwtData?t.jwtData.role:null},isLoggedIn:function(e){return!!e.currentJWT},isApplicant:function(e,t){return"applicant"===t.jwtRole}}});r["a"].use(y["a"]);var X=new y["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:T},{path:"/register",name:"register",component:R},{path:"/login",name:"login",component:U},{path:"/apply",name:"apply",component:K}]});X.beforeEach(function(e,t,a){var r=["/apply"],n=r.includes(e.path);if(n&&(!V.getters.isLoggedIn||!V.getters.isApplicant))return a("/");a()});var Y=X;a("f9e3"),a("2dd8");r["a"].use(_.a),r["a"].use(x["a"],{events:"blur"}),r["a"].config.productionTip=!1,r["a"].prototype.$http=g.a;var Z=localStorage.getItem("accessToken");Z&&(r["a"].prototype.$http.defaults.headers.common["Authorization"]=Z),new r["a"]({router:Y,store:V,render:function(e){return e(v)}}).$mount("#app")},"64a9":function(e,t,a){}});
//# sourceMappingURL=app.08760687.js.map